# coding: utf-8
import tushare as ts
import datetime as dt
import stock_class as sc


# 取tushare的token并连接api
def get_tocken():
    token = ts.set_token('')
    pro = ts.pro_api(token)
    return pro


# 取系统上一日
def get_sys_date():
    today = dt.date.today()
    yestorday = today - dt.timedelta(days=1)
    formatted_yestorday = yestorday.strftime('%Y%m%d')
    return formatted_yestorday


# 取深证股票
def get_sz_stock():
    pro = sc.get_tocken()
    stock_list = pro.stock_basic(exchange='', list_status='L', fields='ts_code,symbol,name,area,industry,list_date')
    stock_list_sz = stock_list.loc[stock_list['ts_code'].str.contains('SZ')]
    return stock_list_sz


# 取上海股票
def get_sh_stock():
    pro = sc.get_tocken()
    stock_list = pro.stock_basic(exchange='', list_status='L', fields='ts_code,symbol,name,area,industry,list_date')
    stock_list_sh = stock_list.loc[stock_list['ts_code'].str.contains('SH')]
    return stock_list_s
